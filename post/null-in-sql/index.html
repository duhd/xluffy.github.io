<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Null in SQL | xluffy&#39;s page</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
    <header>

  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <nav>
    <ul>
      
      
      <li class="pull-left ">
        <a href="https://xluffy.github.io">/home/xluffy&#39;s page</a>
      </li>
      
      
      <li class="pull-left ">
        <a href="/categories/">~/categories</a>
      </li>
      
      
      <li class="pull-left ">
        <a href="https://github.com/xluffy/til/issues">~/til</a>
      </li>
      
      
      <li class="pull-left ">
        <a href="/about">~/about</a>
      </li>
      

      
      
      <li class="pull-right">
        <a href="/index.xml">~/subscribe</a>
      </li>
      

    </ul>
  </nav>
</header>

    
    
      
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
          new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-K4LWNXV');</script>
      
    
  </head>

  <body>
    
      
        <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K4LWNXV" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      
    
    <br/>

<div class="article-meta">
<h1><span class="title">Null in SQL</span></h1>

<h2 class="date">2020/02/04</h2>
<p class="terms">
  
  
  Categories: <a href="/categories/sql">sql</a> 
  
  
  
  
</p>
</div>



<main>


<blockquote>
<p>L∆∞·ª£c d·ªãch + th√™m v√≠ d·ª• t·ª´ <a href="https://mitchum.blog">https://mitchum.blog</a></p>
</blockquote>

<h3 id="1-null">1. NULL</h3>

<pre><code class="language-sql">CREATE TABLE `t` (
  `a` varchar(10) DEFAULT NULL,
  `b` varchar(10) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
</code></pre>

<pre><code class="language-sql">INSERT INTO t(a) VALUES ('1');
INSERT INTO t(b) VALUES ('2');
INSERT INTO t VALUES ();
</code></pre>

<p>C√¢u h·ªèi l√† n·∫øu c√≥ 2 truy v·∫•n nh∆∞ sau th√¨ n√™n s·ª≠ d·ª•ng truy v·∫•n n√†o?</p>

<pre><code class="language-sql">SELECT * FROM t WHERE b = NULL;
</code></pre>

<p>v√†</p>

<pre><code class="language-sql">SELECT * FROM t WHERE b IS NULL;
</code></pre>

<p>C√¢u tr·∫£ l·ªùi cu·ªëi c√πng l√† n√™n d√πng <code>IS</code>, s√°ch m√¥ t·∫£ nh∆∞ sau:</p>

<blockquote>
<p><strong>In SQL, NULL represents the concept of &ldquo;unknown&rdquo;</strong></p>
</blockquote>

<p>So s√°nh s·ª± kh√°c bi·ªát gi·ªØa NULL v√† empty value, d·ªØ li·ªáu th·ªÉ hi·ªán nh∆∞ sau:</p>

<pre><code class="language-sql">INSERT INTO t VALUES ('', '');
</code></pre>

<pre><code class="language-sql">SELECT * FROM t;'
+------+------+
| a    | b    |
+------+------+
| 1    | NULL |
| NULL | 2    |
| NULL | NULL |
|      |      |
+------+------+
4 rows in set (0.00 sec)
</code></pre>

<h3 id="3-unknown">3. Unknown?</h3>

<p>Bi·ªÉu th·ª©c <code>WHERE 1 = 1</code> tr·∫£ v·ªÅ gi√° tr·ªã l√† <code>true</code>, truy v·∫•n s·∫Ω tr·∫£ v·ªÅ to√†n b·ªô d·ªØ li·ªáu c·ªßa b·∫£ng.</p>

<pre><code class="language-sql">SELECT * FROM t WHERE 1 = 1;
</code></pre>

<p>Bi·ªÉu th·ª©c <code>WHERE 1 = 0</code> tr·∫£ v·ªÅ gi√° tr·ªã l√† <code>false</code>, nghƒ©a l√† truy v·∫•n s·∫Ω kh√¥ng tr·∫£ v·ªÅ b·∫•t k·ª≥ d·ªØ li·ªáu n√†o.</p>

<pre><code class="language-sql">SELECT * FROM t WHERE 1 = 0;
</code></pre>

<p>C√≤n n·∫øu c√≥ bi·ªÉu th·ª©c <code>WHERE 1 = NULL</code> th√¨ do kh√¥ng bi·∫øt k·∫øt qu·∫£ c·ªßa ph√©p so s√°nh l√† g√¨, n√™n truy v·∫•n c≈©ng kh√¥ng tr·∫£ v·ªÅ b·∫•t c·ª© d·ªØ li·ªáu g√¨.</p>

<pre><code class="language-sql">SELECT * FROM t WHERE 1 = NULL;
</code></pre>

<p>C√≤n n·∫øu ƒëi·ªÅu ki·ªán l√† <code>NULL</code> th√¨ c≈©ng kh√¥ng tr·∫£ v·ªÅ b·∫•t c·ª© d·ªØ li·ªáu g√¨.</p>

<pre><code class="language-sql">SELECT * FROM t WHERE NULL;
</code></pre>

<p>T√∫m l·∫°i th√¨:</p>

<ul>
<li>Bi·ªÉu th·ª©c sau <code>WHERE</code> m√† <code>true</code> th√¨ tr·∫£ v·ªÅ d·ªØ li·ªáu.</li>
<li>Bi·ªÉu th·ª©c sau <code>WHERE</code> m√† <code>false</code> th√¨ kh√¥ng tr·∫£ v·ªÅ d·ªØ li·ªáu.</li>
<li>Ho·∫∑c tr·∫£ v·ªÅ <code>NULL</code> ho·∫∑c <code>unknown</code> th√¨ c≈©ng kh√¥ng tr·∫£ v·ªÅ d·ªØ li·ªáu.</li>
</ul>

<p>C√¢u h·ªèi ti·∫øp theo l√† database x·ª≠ l√Ω <strong>2 tr∆∞·ªùng h·ª£p <code>false</code> v√† <code>NULL</code></strong> nh∆∞ nhau th√¨ t·∫°i sao ph·∫£i quan t√¢m? Ti·∫øp theo th·ª≠ th√™m ƒëi·ªÅu ki·ªán <code>NOT()</code>.</p>

<pre><code class="language-sql">SELECT * FROM t WHERE NOT(1 = 0);
SELECT * FROM t WHERE NOT(1 = 1);
</code></pre>

<ul>
<li><code>NOT(false) = true</code>, tr·∫£ v·ªÅ d·ªØ li·ªáu.</li>
<li><code>NOT(true) = false</code>, kh√¥ng tr·∫£ v·ªÅ d·ªØ li·ªáu.</li>
</ul>

<p>Nh∆∞ng n·∫øu <code>WHERE NOT(1 = NULL)</code> th√¨ database kh√¥ng tr·∫£ v·ªÅ <code>true</code>, c≈©ng kh√¥ng tr·∫£ v·ªÅ <code>false</code> m√† tr·∫£ v·ªÅ m·ªôt <code>NULL</code> kh√°c ?? ü•∫ ?? (<em>ƒë·∫°i kh√°i l√† m·ªôt NULL kh√°c, kh√°c v·ªõi c√°i NULL tr∆∞·ªõc m·∫∑c d√π ƒë·ªÅu l√† NULL =)))))))))</em>)</p>

<p>T√∫m l·∫°i th√¨ 2 truy v·∫•n sau tr·∫£ v·ªÅ <strong>k·∫øt qu·∫£ gi·ªëng y chang nhau</strong>, d√π ƒëi·ªÅu ki·ªán <strong>ƒë·ªëi l·∫≠p nhau</strong>.</p>

<pre><code class="language-sql">SELECT * FROM t WHERE 1 = NULL;
</code></pre>

<pre><code class="language-sql">SELECT * FROM t WHERE NOT(1 = NULL);
</code></pre>

<h3 id="3-null-and-not-in">3. NULL and NOT IN</h3>

<p>C√≥ ƒëi·ªÅu ki·ªán v·ªõi <code>IN</code> l√† <code>WHERE 1 IN (1, 2, 3, 4, NULL)</code>, k·∫øt qu·∫£ c·ªßa bi·ªÉu th·ª©c l√† <code>true</code> v√¨ s·ªë 1 c√≥ t·ªìn t·∫°i trong danh s√°ch =&gt; tr·∫£ v·ªÅ d·ªØ li·ªáu c·ªßa b·∫£ng.</p>

<pre><code class="language-sql">SELECT * FROM t WHERE 1 IN (1, 2, 3, 4, NULL);
</code></pre>

<p>N·∫øu ƒëi·ªÅu ki·ªán <code>WHERE 1 NOT IN (1, 2, 3, 4, NULL)</code>, k·∫øt qu·∫£ c·ªßa bi·ªÉu th·ª©c s·∫Ω l√† <code>false</code> nh∆∞ b√¨nh th∆∞·ªùng v√¨ s·ªë 1 c√≥ t·ªìn t·∫°i trong danh s√°ch.</p>

<pre><code class="language-sql">SELECT * FROM t WHERE 1 NOT IN (1, 2, 3, 4, NULL);
</code></pre>

<p><strong>Nh∆∞ng v·∫•n ƒë·ªÅ</strong> l√† n·∫øu v·ªõi ƒëi·ªÅu ki·ªán <code>5 NOT IN (1, 2, 3, 4, NULL)</code> c≈©ng s·∫Ω kh√¥ng tr·∫£ v·ªÅ d·ªØ li·ªáu c·ªßa b·∫£ng, d√π s·ªë 5 <strong>kh√¥ng t·ªìn t·∫°i trong danh s√°ch</strong>.</p>

<pre><code class="language-sql">SELECT * FROM t WHERE 5 NOT IN (1, 2, 3, 4 NULL);
</code></pre>

<p>Postgres wiki c≈©ng c√≥ n√≥i t·ªõi tr∆∞·ªùng h·ª£p t∆∞∆°ng t·ª±, h·ªç khuy·∫øn c√°o l√† kh√¥ng n√™n s·ª≠ d·ª•ng <code>NOT IN</code> ho·∫∑c b·∫•t k·ª≥ truy v·∫•n n√†o k·∫øt h·ª£p c·ªßa <code>NOT</code> v√† <code>IN</code> v√≠ d·ª• <code>NOT (x IN (SELECT ...))</code>.</p>

<p>Ngo√†i ra <a href="https://winand.at">Markus Winand</a> c√≥ m·ªôt danh s√°ch c√°ch ch·ªß ƒë·ªÅ chuy√™n s√¢u li√™n quan ƒë·∫øn NULL trong SQL c√≥ th·ªÉ tham kh·∫£o ·ªü <a href="https://modern-sql.com/concept/null">https://modern-sql.com/concept/null</a> ho·∫∑c <a href="https://modern-sql.com/concept/three-valued-logic">https://modern-sql.com/concept/three-valued-logic</a>.</p>

<h3 id="4-ref">4. Ref</h3>

<ul>
<li><a href="https://mitchum.blog/null-values-in-sql-queries">https://mitchum.blog/null-values-in-sql-queries</a></li>
<li><a href="https://wiki.postgresql.org/wiki/Don%27t_Do_This#Don.27t_use_NOT_IN">https://wiki.postgresql.org/wiki/Don%27t_Do_This#Don.27t_use_NOT_IN</a></li>
<li><a href="https://www.cybertec-postgresql.com/en/a-postgresql-story-about-null-is-null-null-and-not-null">https://www.cybertec-postgresql.com/en/a-postgresql-story-about-null-is-null-null-and-not-null</a></li>
<li><a href="https://modern-sql.com/feature/is-distinct-from">https://modern-sql.com/feature/is-distinct-from</a></li>
</ul>

</main>
<section>
  <hr>
<script src="https://utteranc.es/client.js"
        repo="xluffy/xluffy.github.io"
        issue-term="url"
        label="comments"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</section>

    <footer>
      
<script>
(function() {
  function center_el(tagName) {
    var tags = document.getElementsByTagName(tagName), i, tag;
    for (i = 0; i < tags.length; i++) {
      tag = tags[i];
      var parent = tag.parentElement;
      
      if (parent.childNodes.length === 1) {
        
        if (parent.nodeName === 'A') {
          parent = parent.parentElement;
          if (parent.childNodes.length != 1) continue;
        }
        if (parent.nodeName === 'P') parent.style.textAlign = 'center';
      }
    }
  }
  var tagNames = ['img', 'embed', 'object'];
  for (var i = 0; i < tagNames.length; i++) {
    center_el(tagNames[i]);
  }
})();
</script>

      
      <hr/>
      <a href="https://github.com/xluffy">Github</a> | <a href="https://twitter.com/min0lta">Twitter</a> | <a href="https://t.me/xluffy">Telegram</a>
      
      <br><a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-nd/4.0/80x15.png"></a>
    </footer>
  </body>
</html>

